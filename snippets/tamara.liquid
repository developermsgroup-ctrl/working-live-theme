<script>
  window.tamaraWidgetConfig = {
    lang: "{{ request.locale.iso_code }}",
    country: "AE",
    publicKey: "c4969bd8-5266-4b31-b2d5-8f84ac8ef072",
    css: `:host {
      --font-primary: inherit !important;
      --font-secondary: inherit !important;
    }
    .tamara-summary-widget__amount {
      font-weight: 700 !important;
    }`,
    style: {
      fontSize: '14px',
      badgeRatio: 1.2,
    }
  };

  (function() {
    var script = document.createElement('script');
    script.src = 'https://cdn.tamara.co/widget-v2/tamara-widget.js';
    script.defer = true;
    script.type = 'text/javascript';
    script.onerror = function() {
      console.warn('Tamara widget script failed to load. Check CDN or connectivity.');
      // Optional: fallback UI here (e.g. message or hide widget container)
      document.getElementById('tamara-widget-custom')?.remove(); // Hide widget if needed
    };
    document.head.appendChild(script);
  })();
</script>

<div>
  <tamara-widget
    id="tamara-widget-custom"
    type="tamara-summary"
    amount="{{ product.price | money_without_currency | remove: ',' }}"
    config='{"badgePosition":"right","showExtraContent":""}'
    inline-type="2">
  </tamara-widget>
</div>
